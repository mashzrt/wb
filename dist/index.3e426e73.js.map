{"mappings":"AAAA,SAAS,gBAAgB,CAAC,oBAAoB;IAC5C,MAAM,OAAO,SAAS,cAAc,CAAC;IAErC,SAAS,SAAS,OAAO,EAAE,SAAS;QAClC,QAAQ,SAAS,CAAC,GAAG,CAAC;IACxB;IAEA,MAAM,UAAU,SAAS,aAAa,CAAC;IACvC,SAAS,SAAS;IAClB,KAAK,WAAW,CAAC;IAEjB,MAAM,YAAY,SAAS,aAAa,CAAC;IACzC,SAAS,WAAW;IACpB,QAAQ,WAAW,CAAC;IAEpB,MAAM,eAAe,SAAS,aAAa,CAAC;IAC5C,SAAS,cAAc;IACvB,aAAa,WAAW,GAAG;IAC3B,UAAU,WAAW,CAAC;IAEtB,0BAA0B;IAC1B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG;IACxC,KAAK,WAAW,CAAC;IAEjB,MAAM,iBAAiB,SAAS,aAAa,CAAC;IAC9C,SAAS,gBAAgB;IACzB,UAAU,WAAW,CAAC;IAEtB,IAAI,CAAC,aAAa,OAAO,CAAC,aACxB;SAEA;IAGF,SAAS;QACP,MAAM,uDACH,IAAI,CAAC,CAAC,WAAa,SAAS,IAAI,IAChC,IAAI,CAAC,CAAC;YACL,MAAM,WAAW,KAAK,GAAG,CAAC,CAAC;gBACzB,QAAQ,GAAG,GAAG,CAAC,EAAE,QAAQ,GAAG,CAAC,WAAW,EACtC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO,EACnC,CAAC;gBAEF,IAAI,SAAS,WAAW,QAAQ,MAAM,GAAG,IAAI,OAAO,CAAC;gBACrD,IAAI,SAAS,OAAO,SAAS,KAC3B,SAAS,AAAC,CAAA,KAAK,MAAM,KAAM,MAAa,GAAE,EAAG,OAAO,CAAC;gBAGvD,QAAQ,MAAM,GAAG;gBAEjB,OAAO;YACT;YAEA,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC;YAChD,YAAY;QACd;IACJ;IAEA,SAAS;QACP,MAAM,WAAW,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC;QACjD,YAAY;IACd;IAEA,SAAS,YAAY,QAAQ;QAC3B,SAAS,OAAO,CAAC,CAAC;YAChB,MAAM,OAAO,WAAW;YACxB,eAAe,WAAW,CAAC;QAC7B;IACF;IAEA,SAAS,WAAW,OAAO;QACzB,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,SAAS,MAAM;QAEf,MAAM,aAAa,SAAS,aAAa,CAAC;QAC1C,SAAS,YAAY;QAErB,MAAM,aAAa,SAAS,aAAa,CAAC;QAC1C,WAAW,GAAG,GAAG,CAAC,EAAE,QAAQ,GAAG,CAAC,CAAC;QACjC,SAAS,YAAY;QAErB,MAAM,eAAe,SAAS,aAAa,CAAC;QAC5C,aAAa,WAAW,GAAG;QAC3B,SAAS,cAAc;QACvB,aAAa,KAAK,CAAC,OAAO,GAAG;QAE7B,MAAM,eAAe;YACnB,aAAa,KAAK,CAAC,OAAO,GACxB,aAAa,KAAK,CAAC,OAAO,KAAK,SAAS,UAAU;YACpD,SAAS,KAAK,CAAC,OAAO,GACpB,SAAS,KAAK,CAAC,OAAO,KAAK,SAAS,UAAU;QAClD;QAEA,WAAW,gBAAgB,CAAC,aAAa;QACzC,WAAW,gBAAgB,CAAC,cAAc;QAC1C,aAAa,gBAAgB,CAAC,cAAc;QAC5C,aAAa,gBAAgB,CAAC,cAAc;QAE5C,MAAM,eAAe,SAAS,aAAa,CAAC;QAC5C,SAAS,cAAc;QAEvB,MAAM,QAAQ,SAAS,aAAa,CAAC;QACrC,SAAS,OAAO;QAChB,MAAM,WAAW,GAAG,QAAQ,KAAK;QAEjC,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,KAAK,WAAW,GAAG,CAAC,GAAG,EAAE,QAAQ,IAAI,CAAC,CAAC;QACvC,WAAW,GAAG,GAAG,QAAQ,IAAI;QAC7B,SAAS,MAAM;QAEf,aAAa,MAAM,CAAC,OAAO;QAE3B,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,SAAS,QAAQ;QACjB,OAAO,WAAW,GAAG,QAAQ,MAAM;QAEnC,MAAM,QAAQ,SAAS,aAAa,CAAC;QACrC,MAAM,WAAW,GAAG,CAAC,EAAE,QAAQ,KAAK,CAAC,QAAE,CAAC;QACxC,SAAS,OAAO;QAEhB,MAAM,gBAAgB,SAAS,aAAa,CAAC;QAC7C,cAAc,WAAW,GAAG,CAAC,EAC3B,QAAQ,KAAK,GAAG,KAAK,IAAI,CAAC,AAAC,QAAQ,KAAK,GAAG,QAAQ,QAAQ,GAAI,KAChE,QAAE,CAAC;QACJ,SAAS,eAAe;QAExB,MAAM,oBAAoB,SAAS,aAAa,CAAC;QACjD,SAAS,mBAAmB;QAC5B,kBAAkB,WAAW,GAAG;QAEhC,MAAM,WAAW,SAAS,aAAa,CAAC;QACxC,SAAS,WAAW,GAAG,CAAC,CAAC,EAAE,QAAQ,QAAQ,CAAC,CAAC,CAAC;QAC9C,SAAS,UAAU;QAEnB,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,SAAS,QAAQ;QAEjB,WAAW,MAAM,CAAC,YAAY,cAAc,UAAU;QAEtD,KAAK,MAAM,CACT,YACA,eACA,OACA,mBACA,cACA;QAGF,aAAa,gBAAgB,CAAC,SAAS,SAAU,KAAK;YACpD,MAAM,eAAe;YACrB,MAAM,KAAK,CAAC,OAAO,GAAG;YACtB,SAAS,GAAG,GAAG,QAAQ,GAAG;YAC1B,WAAW,WAAW,GAAG,QAAQ,IAAI;QACvC;QAEA,OAAO;IACT;IAEA,SAAS;QACP,MAAM,QAAQ,SAAS,aAAa,CAAC;QACrC,SAAS,OAAO;QAEhB,MAAM,eAAe,SAAS,aAAa,CAAC;QAC5C,SAAS,cAAc;QACvB,MAAM,WAAW,CAAC;QAElB,MAAM,gBAAgB,SAAS,aAAa,CAAC;QAC7C,SAAS,eAAe;QACxB,aAAa,WAAW,CAAC;QAEzB,MAAM,WAAW,SAAS,aAAa,CAAC;QACxC,SAAS,UAAU;QACnB,aAAa,WAAW,CAAC;QAEzB,MAAM,eAAe,SAAS,aAAa,CAAC;QAC5C,SAAS,cAAc;QACvB,aAAa,WAAW,CAAC;QAEzB,MAAM,aAAa,SAAS,aAAa,CAAC;QAC1C,aAAa,WAAW,CAAC;QAEzB,MAAM,gBAAgB,CAAC,SAAS,SAAU,KAAK;YAC7C,IAAI,MAAM,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,6BAClC,MAAM,KAAK,CAAC,OAAO,GAAG;QAE1B;QAEA,OAAO,gBAAgB,CAAC,SAAS,SAAU,KAAK;YAC9C,IAAI,MAAM,MAAM,IAAI,OAClB,MAAM,KAAK,CAAC,OAAO,GAAG;QAE1B;QAEA,OAAO;YAAE;YAAO;YAAU;QAAW;IACvC;AACF","sources":["components/cards.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\r\n  const root = document.getElementById(\"root\");\r\n\r\n  function addClass(element, elemClass) {\r\n    element.classList.add(elemClass);\r\n  }\r\n\r\n  const section = document.createElement(\"section\");\r\n  addClass(section, \"products\");\r\n  root.appendChild(section);\r\n\r\n  const container = document.createElement(\"div\");\r\n  addClass(container, \"container\");\r\n  section.appendChild(container);\r\n\r\n  const sectionTitle = document.createElement(\"h2\");\r\n  addClass(sectionTitle, \"products__title\");\r\n  sectionTitle.textContent = \"Хиты продаж\";\r\n  container.appendChild(sectionTitle);\r\n\r\n  //создание модального окна\r\n  const { modal, modalImg, modalTitle } = createModal();\r\n  root.appendChild(modal);\r\n\r\n  const cardsContainer = document.createElement(\"div\");\r\n  addClass(cardsContainer, \"products__container\");\r\n  container.appendChild(cardsContainer);\r\n\r\n  if (!localStorage.getItem(\"Products\")) {\r\n    fetchDataAndRenderCards();\r\n  } else {\r\n    renderCardsFromLocalStorage();\r\n  }\r\n\r\n  function fetchDataAndRenderCards() {\r\n    fetch(\"https://65d7760427d9a3bc1d7b168a.mockapi.io/product\")\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        const products = json.map((product) => {\r\n          product.img = `${product.img}/cats?lock=${\r\n            Math.floor(Math.random() * 100) + 1\r\n          }`;\r\n\r\n          let rating = parseFloat(product.rating / 10).toFixed(1);\r\n          if (rating > 5.0 || rating < 3.5) {\r\n            rating = (Math.random() * (5.0 - 3.5) + 3.5).toFixed(1);\r\n          }\r\n\r\n          product.rating = rating;\r\n\r\n          return product;\r\n        });\r\n\r\n        localStorage.setItem(\"Products\", JSON.stringify(products));\r\n        renderCards(products);\r\n      });\r\n  }\r\n\r\n  function renderCardsFromLocalStorage() {\r\n    const products = JSON.parse(localStorage.getItem(\"Products\"));\r\n    renderCards(products);\r\n  }\r\n\r\n  function renderCards(products) {\r\n    products.forEach((product) => {\r\n      const card = createCard(product);\r\n      cardsContainer.appendChild(card);\r\n    });\r\n  }\r\n\r\n  function createCard(product) {\r\n    const card = document.createElement(\"div\");\r\n    addClass(card, \"product__card\");\r\n\r\n    const imgWrapper = document.createElement(\"div\");\r\n    addClass(imgWrapper, \"product__img-wrapper\");\r\n\r\n    const productImg = document.createElement(\"img\");\r\n    productImg.src = `${product.img}`;\r\n    addClass(productImg, \"product__img\");\r\n\r\n    const quickViewBtn = document.createElement(\"button\");\r\n    quickViewBtn.textContent = \"Быстрый просмотр\";\r\n    addClass(quickViewBtn, \"product__btn--quickview\");\r\n    quickViewBtn.style.display = \"none\";\r\n\r\n    const showQuickBtn = () => {\r\n      quickViewBtn.style.display =\r\n        quickViewBtn.style.display === \"none\" ? \"block\" : \"none\";\r\n      discount.style.display =\r\n        discount.style.display === \"none\" ? \"block\" : \"none\";\r\n    };\r\n\r\n    productImg.addEventListener(\"mouseover\", showQuickBtn);\r\n    productImg.addEventListener(\"mouseleave\", showQuickBtn);\r\n    quickViewBtn.addEventListener(\"mouseenter\", showQuickBtn);\r\n    quickViewBtn.addEventListener(\"mouseleave\", showQuickBtn);\r\n\r\n    const productTitle = document.createElement(\"h2\");\r\n    addClass(productTitle, \"product__title\");\r\n\r\n    const brand = document.createElement(\"span\");\r\n    addClass(brand, \"product__brand\");\r\n    brand.textContent = product.brand;\r\n\r\n    const name = document.createElement(\"span\");\r\n    name.textContent = ` / ${product.name}`;\r\n    productImg.alt = product.name;\r\n    addClass(name, \"product__name\");\r\n\r\n    productTitle.append(brand, name);\r\n\r\n    const rating = document.createElement(\"div\");\r\n    addClass(rating, \"product__rating\");\r\n    rating.textContent = product.rating;\r\n\r\n    const price = document.createElement(\"div\");\r\n    price.textContent = `${product.price} р`;\r\n    addClass(price, \"product__price\");\r\n\r\n    const discountPrice = document.createElement(\"div\");\r\n    discountPrice.textContent = `${\r\n      product.price - Math.ceil((product.price * product.discount) / 100)\r\n    } р`;\r\n    addClass(discountPrice, \"product__discount-price\");\r\n\r\n    const discountSignature = document.createElement(\"p\");\r\n    addClass(discountSignature, \"product__discount-signature\");\r\n    discountSignature.textContent = \"с WB кошельком\";\r\n\r\n    const discount = document.createElement(\"span\");\r\n    discount.textContent = `-${product.discount}%`;\r\n    addClass(discount, \"product__discount\");\r\n\r\n    const addBtn = document.createElement(\"span\");\r\n    addClass(addBtn, \"icon-cart\");\r\n\r\n    imgWrapper.append(productImg, quickViewBtn, discount, addBtn);\r\n\r\n    card.append(\r\n      imgWrapper,\r\n      discountPrice,\r\n      price,\r\n      discountSignature,\r\n      productTitle,\r\n      rating\r\n    );\r\n\r\n    quickViewBtn.addEventListener(\"click\", function (event) {\r\n      event.stopPropagation();\r\n      modal.style.display = \"block\";\r\n      modalImg.src = product.img;\r\n      modalTitle.textContent = product.name;\r\n    });\r\n\r\n    return card;\r\n  }\r\n\r\n  function createModal() {\r\n    const modal = document.createElement(\"div\");\r\n    addClass(modal, \"products__modal\");\r\n\r\n    const modalContent = document.createElement(\"div\");\r\n    addClass(modalContent, \"products__modal-content\");\r\n    modal.appendChild(modalContent);\r\n\r\n    const modalCloseBtn = document.createElement(\"button\");\r\n    addClass(modalCloseBtn, \"product__btn--closemodal\");\r\n    modalContent.appendChild(modalCloseBtn);\r\n\r\n    const modalImg = document.createElement(\"img\");\r\n    addClass(modalImg, \"products__modal-img\");\r\n    modalContent.appendChild(modalImg);\r\n\r\n    const modalDescrip = document.createElement(\"div\");\r\n    addClass(modalDescrip, \"products__modal-description\");\r\n    modalContent.appendChild(modalDescrip);\r\n\r\n    const modalTitle = document.createElement(\"p\");\r\n    modalDescrip.appendChild(modalTitle);\r\n\r\n    modal.addEventListener(\"click\", function (event) {\r\n      if (event.target.classList.contains(\"product__btn--closemodal\")) {\r\n        modal.style.display = \"none\";\r\n      }\r\n    });\r\n\r\n    window.addEventListener(\"click\", function (event) {\r\n      if (event.target == modal) {\r\n        modal.style.display = \"none\";\r\n      }\r\n    });\r\n\r\n    return { modal, modalImg, modalTitle };\r\n  }\r\n});\r\n"],"names":[],"version":3,"file":"index.3e426e73.js.map","sourceRoot":"/__parcel_source_root/"}